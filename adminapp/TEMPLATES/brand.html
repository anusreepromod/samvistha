{% extends "master.html" %}
{% load static %}
{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script>
   window.onload=function(){
       loaddata()
   }
    
</script>
<div class="content" style="padding-top:40px; padding-left: 10px;">
    <div class="page-title">
        <div class="row justify-content-between align-items-center">
            <div class="col-xl-4 col-lg-4 col-md-4 d-flex align-items-center justify-content-between justify-content-md-start mb-3 mb-md-0">
                
                <div class="d-inline-block">
                    <h5 class="h4 d-inline-block font-weight-400 mb-0 ">Manage Brand
</h5>
                </div>
            </div>
            
            <div class="col-xl-8 col-lg-8 col-md-8 d-flex align-items-center justify-content-between justify-content-md-end">
                <div class="col-xl-4 col-lg-4 col-md-4 d-flex align-items-center justify-content-between justify-content-md-end">
            
                    <input class="form-control py-2 border-right-0 border" type="search" value="search" id="example-search-input">
                    <span class="input-group-append">
                      <button class="btn btn-outline-secondary border-left-0 border" type="button">
                            <i class="fa fa-search"></i>
                      </button>
                    </span>  
        </div> 
            </div>
        </div>
    </div>
    
    <div class="row" style="padding-top: 40px;">
      <div class="col-md-12">
      <div class="card">
      <div class="card-header">
      Brand Form
      </div>
      <div class="card-body">
      <form action="/adminapp/brand/" method="POST" enctype="multipart/form-data">
        {% csrf_token %} 
      <div class="row">
      <div class="col-6">
      <div class="form-group" >
      <label class="input-label" for=""> Brand Name
      </label>
      <input type="text" name="brandname" class="form-control" placeholder="New Brand" required>
      </div>
      </div>
      <!-- <div class="col-6">
      <label>Image</label><small style="color: red">*
      </small>
      <div class="custom-file">
      <input type="file" name="image" id="" accept=".jpg, .png, .jpeg, .gif, .bmp, .tif, .tiff|image/*" required>
      <label class="custom-file-label" for="">Choose File</label>
      </div>
      </div> -->
      <div class="form-group col-6" style="padding-top: 25px;">
        <div class="float-left col-4">
            <label for="document" class="float-left pt-1 form-control-label">Brand Image<span class="text-danger">*</span> </label>
        </div>
        <div class="float-right col-8">
            <!-- <input type="hidden" name="certificate" id="" value="" > -->
            <div class="choose-file form-group">
                <label for="">
                    <!-- <div>Choose File</div> -->
                    <input class="form-control border-0" name="brandimage" type="file" >
                </label>     
            </div>
        </div>
    </div>
      <div class="col-12 ">
      <div class="form-group">
      <hr>
      <!-- <center>
      <img style="width: 30%;border: 1px solid; border-radius: 10px;" id="viewer" src="" alt="image" />
      </center> -->
      </div>
      </div>
      </div>
      <hr>
      <div class="container">
      <button type="submit" class="btn" style="background-color: rgb(226, 123, 140);">submit</button>
      <button type="cancel" class="btn btn-secondary">Cancel</button>
      </div>
      </form>
      </div>
      </div>
      </div>
      
  </div>

<div class="row" style="padding-top: 50px;">
    <div class="col-lg-12">
     <div class="card">
        <div class="card-body py-0">
            <div class="table-responsive">
                <table class="table" id="table">
                    <thead class="thead-light">
                      <tr>
                        
                        <th scope="col" style="width: 15%;">Brand ID</th>
                        <th scope="col" style="width: 15%;">Name</th>
                        <th scope="col" style="width: 15%;">Image</th>
                        <th scope="col" style="width: 15%;">Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      
                      <!-- <tr>
                        
                        <td>{{i.id}}</td>
                        <td>{{i.brandname}}</td>
                        <td><img src="/adminapp/media/{{i.brandimage}}" alt="image to be uploaded"></td>
                        <td>
                          <a class="btn  btn-sm edit"data-toggle="modal" 
                          data-target="#editbrand" style="cursor: pointer;background-color: rgb(226, 123, 140);" href="#editbrand">
                            <i class="material-icons">edit</i>Edit
                            </a>
                            <a class="btn btn-danger btn-sm delete" style="cursor: pointer;" >
                                <i class="material-icons">delete</i>Delete
                                </a> 
                        </td>
                      </tr> -->
                      
                     
                    </tbody>
                  </table>
            </div>
            </div>
     </div>
     {{msg}}
    </div>
</div>

<!-- edit modal -->
<div class="modal fade" id="editbrand" tabindex="-1" aria-labelledby="editbrandLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editbrandLabel">Edit Brand</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-12">
            <div class="row">

            <div class="form-group col-lg-12">
              <label for="" class="form-control-label">Brand Name</label>
              <input class="form-control" required="required" name="" type="text" placeholder="Sam">
          </div>
          <div class="form-group col-lg-6">
            <label for="" class="form-control-label">Brand Logo</label>
            <input type="file" id="myFile" name="filename">
        </div>
        <div class="form-group col-lg-6">
          
          <img src="" alt="Brand logo uploaded">
        </div> 
      </div>
          </div>
        </div>
      </div>
      <div class="container" style="padding-bottom: 10px;">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>
</div>
</div>
<script>
    function loaddata(){
        $.ajax({
           url:'/adminapp/loadbrand/',
           type:'GET',
           success:function(response){
               $('.tr').remove()
               
               for(i=0;i<response.brand.length;i++)
               $('#table').append("<tr class='tr'><td>"+response.brand[i].id+"</td><td>"+response.brand[i].bname+"</td><td><img src='/adminapp/media/response.brand[i].bimage' alt='image to be uploaded'></td><td><button onclick='deldata("+response.brand[i].id+")'>Delete</button></td></tr>")
           } 
        })
    }
    function deldata(id){
    $.ajaxSetup({
  headers: { "X-CSRFToken": '{{csrf_token}}' }
});
            $.ajax({
                url:'/adminapp/delbrand/',
                type: 'POST',
                data:{
                    id:id
                },
                success: function(response){
                    alert(response.msg)
                    loaddata()
                }
            })
        }
</script>
{% endblock %}